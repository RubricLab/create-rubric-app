model User {
  id    String @id @default(nanoid())
  email String @unique

  agentIsAlive Boolean @default(true)

  authProviders AuthProvider[]
  sessions      Session[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model AuthProvider {
  provider     String
  accountId    String
  label        String
  scopes       String[]
  accessToken  String?
  refreshToken String?
  expiresAt    DateTime?
  user         User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId       String

  @@id([userId, provider, accountId])
  @@unique([userId, provider, accountId])
}

model Session {
  key String @id @default(nanoid())

  user  User   @relation(fields: [email], references: [id], onDelete: Cascade)
  email String
}
